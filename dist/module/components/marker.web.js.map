{"version":3,"names":["React","Marker","GMMarker","OverlayViewF","GMOverlayView","useGoogleMap","mapMouseEventToMapEvent","Callout","CalloutContext","Component","constructor","props","state","calloutVisible","showCallout","setState","hideCallout","render","createElement","MarkerF","toggleCalloutVisible","_props$anchor","_props$anchor2","map","customMarkerContainerRef","useRef","markerSize","setMarkerSize","useState","width","height","useEffect","current","clientWidth","clientHeight","onMarkerPress","e","_props$onPress","onPress","call","coordinate","hasNonCalloutChildren","useMemo","Children","toArray","children","find","child","type","anchor","x","y","calloutAnchor","calloutContextValue","Provider","value","Fragment","mapPaneName","position","lat","Number","latitude","lng","longitude","getPixelPositionOffset","w","h","ref","onClick","draggable","title","onDrag","_props$onDrag","onDragStart","_props$onDragStart","onDragEnd","_props$onDragEnd","options","clickable","tappable","opacity","anchorPoint","google","maps","Point"],"sources":["marker.web.js"],"sourcesContent":["import React from 'react';\nimport {\n  Marker as GMMarker,\n  OverlayViewF as GMOverlayView,\n  useGoogleMap,\n} from '@react-google-maps/api';\nimport { mapMouseEventToMapEvent } from '../utils/mouse-event';\nimport { Callout, CalloutContext } from './callout';\n//Wrapped in class component to provide methods\n//forwardRef + useImperativeHandle not sufficient because it returns a ForwardRefExoticComponent which does not seem to render in the MapView\nexport class Marker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { calloutVisible: false };\n  }\n  showCallout() {\n    this.setState({ calloutVisible: true });\n  }\n  hideCallout() {\n    this.setState({ calloutVisible: false });\n  }\n  render() {\n    return React.createElement(MarkerF, {\n      ...this.props,\n      calloutVisible: this.state.calloutVisible,\n      toggleCalloutVisible: () =>\n        this.setState({ calloutVisible: !this.state.calloutVisible }),\n    });\n  }\n}\nfunction MarkerF(props) {\n  const map = useGoogleMap();\n  const customMarkerContainerRef = React.useRef();\n  const [markerSize, setMarkerSize] = React.useState({ width: 22, height: 40 }); //22 x 40 is the default google maps marker size\n  React.useEffect(() => {\n    if (customMarkerContainerRef.current) {\n      setMarkerSize({\n        width: customMarkerContainerRef.current.clientWidth,\n        height: customMarkerContainerRef.current.clientHeight,\n      });\n    }\n  }, [customMarkerContainerRef.current]);\n  const onMarkerPress = (e) => {\n    props.onPress?.(\n      mapMouseEventToMapEvent(e, props.coordinate, map, 'marker-press')\n    );\n    props.toggleCalloutVisible();\n  };\n  const hasNonCalloutChildren = React.useMemo(\n    () =>\n      !!React.Children.toArray(props.children).find((child) => {\n        return child.type !== Callout;\n      }),\n    [props.children]\n  );\n  //Default anchor values to react-native-maps values (https://github.com/react-native-maps/react-native-maps/blob/master/docs/marker.md)\n  const anchor = props.anchor || { x: 0.5, y: 1 };\n  const calloutAnchor = props.calloutAnchor || { x: 0.5, y: 0 };\n  const calloutContextValue = {\n    calloutVisible: props.calloutVisible,\n    toggleCalloutVisible: props.toggleCalloutVisible,\n    coordinate: props.coordinate,\n    markerSize,\n    anchor: calloutAnchor,\n  };\n  return React.createElement(\n    CalloutContext.Provider,\n    { value: calloutContextValue },\n    React.createElement(\n      React.Fragment,\n      null,\n      hasNonCalloutChildren\n        ? React.createElement(\n            GMOverlayView,\n            {\n              mapPaneName: 'overlayMouseTarget',\n              position: {\n                lat: Number(props.coordinate.latitude),\n                lng: Number(props.coordinate.longitude),\n              },\n              getPixelPositionOffset: (w, h) => ({\n                x: -(w * anchor.x),\n                y: -(h * anchor.y),\n              }),\n            },\n            React.createElement(\n              'div',\n              { ref: customMarkerContainerRef, onClick: () => onMarkerPress() },\n              props.children\n            )\n          )\n        : React.createElement(GMMarker, {\n            draggable: props.draggable,\n            title: props.title,\n            onClick: (e) => onMarkerPress(e),\n            onDrag: (e) =>\n              props.onDrag?.(\n                mapMouseEventToMapEvent(e, props.coordinate, map, '')\n              ),\n            onDragStart: (e) =>\n              props.onDragStart?.(\n                mapMouseEventToMapEvent(e, props.coordinate, map, '')\n              ),\n            onDragEnd: (e) =>\n              props.onDragEnd?.(\n                mapMouseEventToMapEvent(e, props.coordinate, map, '')\n              ),\n            options: {\n              clickable: props.tappable,\n              opacity: props.opacity,\n              draggable: props.draggable,\n              anchorPoint: props.anchor\n                ? new google.maps.Point(props.anchor?.x, props.anchor?.y)\n                : null,\n            },\n            position: {\n              lat: Number(props.coordinate.latitude),\n              lng: Number(props.coordinate.longitude),\n            },\n            children: props.children,\n          })\n    )\n  );\n}\n"],"mappings":"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","ignoreList":[]}