{"version":3,"names":["_react","_interopRequireDefault","require","_api","_mouseEvent","_callout","e","__esModule","default","Marker","React","Component","constructor","props","state","calloutVisible","showCallout","setState","hideCallout","render","createElement","MarkerF","toggleCalloutVisible","exports","_props$anchor","_props$anchor2","map","useGoogleMap","customMarkerContainerRef","useRef","markerSize","setMarkerSize","useState","width","height","useEffect","current","clientWidth","clientHeight","onMarkerPress","_props$onPress","onPress","call","mapMouseEventToMapEvent","coordinate","hasNonCalloutChildren","useMemo","Children","toArray","children","find","child","type","Callout","anchor","x","y","calloutAnchor","calloutContextValue","CalloutContext","Provider","value","Fragment","GMOverlayView","mapPaneName","position","lat","Number","latitude","lng","longitude","getPixelPositionOffset","w","h","ref","onClick","GMMarker","draggable","title","onDrag","_props$onDrag","onDragStart","_props$onDragStart","onDragEnd","_props$onDragEnd","options","clickable","tappable","opacity","anchorPoint","google","maps","Point"],"sources":["marker.web.js"],"sourcesContent":["import React from 'react';\nimport {\n  Marker as GMMarker,\n  OverlayViewF as GMOverlayView,\n  useGoogleMap,\n} from '@react-google-maps/api';\nimport { mapMouseEventToMapEvent } from '../utils/mouse-event';\nimport { Callout, CalloutContext } from './callout';\n//Wrapped in class component to provide methods\n//forwardRef + useImperativeHandle not sufficient because it returns a ForwardRefExoticComponent which does not seem to render in the MapView\nexport class Marker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { calloutVisible: false };\n  }\n  showCallout() {\n    this.setState({ calloutVisible: true });\n  }\n  hideCallout() {\n    this.setState({ calloutVisible: false });\n  }\n  render() {\n    return React.createElement(MarkerF, {\n      ...this.props,\n      calloutVisible: this.state.calloutVisible,\n      toggleCalloutVisible: () =>\n        this.setState({ calloutVisible: !this.state.calloutVisible }),\n    });\n  }\n}\nfunction MarkerF(props) {\n  const map = useGoogleMap();\n  const customMarkerContainerRef = React.useRef();\n  const [markerSize, setMarkerSize] = React.useState({ width: 22, height: 40 }); //22 x 40 is the default google maps marker size\n  React.useEffect(() => {\n    if (customMarkerContainerRef.current) {\n      setMarkerSize({\n        width: customMarkerContainerRef.current.clientWidth,\n        height: customMarkerContainerRef.current.clientHeight,\n      });\n    }\n  }, [customMarkerContainerRef.current]);\n  const onMarkerPress = (e) => {\n    props.onPress?.(\n      mapMouseEventToMapEvent(e, props.coordinate, map, 'marker-press')\n    );\n    props.toggleCalloutVisible();\n  };\n  const hasNonCalloutChildren = React.useMemo(\n    () =>\n      !!React.Children.toArray(props.children).find((child) => {\n        return child.type !== Callout;\n      }),\n    [props.children]\n  );\n  //Default anchor values to react-native-maps values (https://github.com/react-native-maps/react-native-maps/blob/master/docs/marker.md)\n  const anchor = props.anchor || { x: 0.5, y: 1 };\n  const calloutAnchor = props.calloutAnchor || { x: 0.5, y: 0 };\n  const calloutContextValue = {\n    calloutVisible: props.calloutVisible,\n    toggleCalloutVisible: props.toggleCalloutVisible,\n    coordinate: props.coordinate,\n    markerSize,\n    anchor: calloutAnchor,\n  };\n  return React.createElement(\n    CalloutContext.Provider,\n    { value: calloutContextValue },\n    React.createElement(\n      React.Fragment,\n      null,\n      hasNonCalloutChildren\n        ? React.createElement(\n            GMOverlayView,\n            {\n              mapPaneName: 'overlayMouseTarget',\n              position: {\n                lat: Number(props.coordinate.latitude),\n                lng: Number(props.coordinate.longitude),\n              },\n              getPixelPositionOffset: (w, h) => ({\n                x: -(w * anchor.x),\n                y: -(h * anchor.y),\n              }),\n            },\n            React.createElement(\n              'div',\n              { ref: customMarkerContainerRef, onClick: () => onMarkerPress() },\n              props.children\n            )\n          )\n        : React.createElement(GMMarker, {\n            draggable: props.draggable,\n            title: props.title,\n            onClick: (e) => onMarkerPress(e),\n            onDrag: (e) =>\n              props.onDrag?.(\n                mapMouseEventToMapEvent(e, props.coordinate, map, '')\n              ),\n            onDragStart: (e) =>\n              props.onDragStart?.(\n                mapMouseEventToMapEvent(e, props.coordinate, map, '')\n              ),\n            onDragEnd: (e) =>\n              props.onDragEnd?.(\n                mapMouseEventToMapEvent(e, props.coordinate, map, '')\n              ),\n            options: {\n              clickable: props.tappable,\n              opacity: props.opacity,\n              draggable: props.draggable,\n              anchorPoint: props.anchor\n                ? new google.maps.Point(props.anchor?.x, props.anchor?.y)\n                : null,\n            },\n            position: {\n              lat: Number(props.coordinate.latitude),\n              lng: Number(props.coordinate.longitude),\n            },\n            children: props.children,\n          })\n    )\n  );\n}\n"],"mappings":"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","ignoreList":[]}